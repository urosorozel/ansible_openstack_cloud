# ansible_openstack_cloud
Deploy multinode Openstack on Cloud (vxlan based netwok)

```
# controller 3
ip link add vxlan100 type vxlan id 100 dstport 4789 local 10.176.160.104 
bridge fdb append 00:00:00:00:00:00 dev vxlan100 dst 10.176.129.217
bridge fdb append 00:00:00:00:00:00 dev vxlan100 dst 10.176.129.203
ip link set dev eth0 mtu 1450
ip link set  dev vxlan100 up
ip addr add 10.20.10.2/24 dev vxlan100

# controller 2
ip link del dev vxlan100
ip link add vxlan100 type vxlan id 100 dstport 4789 local 10.176.129.217
bridge fdb append 00:00:00:00:00:00 dev vxlan100 dst 10.176.160.104 
bridge fdb append 00:00:00:00:00:00 dev vxlan100 dst 10.176.129.203
ip link set dev eth0 mtu 1450
ip link set  dev vxlan100 up
ip addr add 10.20.10.3/24 dev vxlan100

# controller 1 
ip link del dev vxlan100
ip link add vxlan100 type vxlan id 100 dstport 4789 local 10.176.129.203
bridge fdb append 00:00:00:00:00:00 dev vxlan100 dst 10.176.160.104 
bridge fdb append 00:00:00:00:00:00 dev vxlan100 dst 10.176.129.217
ip link set dev eth0 mtu 1450
ip link set  dev vxlan100 up
ip addr add 10.20.10.4/24 dev vxlan100
```
https://vincent.bernat.im/en/blog/2017-vxlan-linux

https://joejulian.name/blog/how-to-configure-linux-vxlans-with-multiple-unicast-endpoints/


Friday 27 October 2017  21:19:50 +1100 (0:00:01.483)       3:26:06.539 ********
===============================================================================
Setup openstack playbook run --------------------------------------------------------------------------------------------------------------------------------------------------------------------- 6845.70s
Setup infrastructure playbook run ---------------------------------------------------------------------------------------------------------------------------------------------------------------- 3058.45s
Setup hosts playbook run ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1835.22s
Boostrap ansible ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 392.54s
Gathering Facts ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 21.59s
rpc_networking : Ensure networking packages are installed ------------------------------------------------------------------------------------------------------------------------------------------ 20.82s
Add neighbours to VXLAN ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 18.77s
restart networking --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 18.20s
geerlingguy.nfs : Ensure NFS utilities are installed. ---------------------------------------------------------------------------------------------------------------------------------------------- 18.11s
Gathering Facts ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 11.53s
Online intefaces ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 11.47s
rpc_networking : Create the network interface file -------------------------------------------------------------------------------------------------------------------------------------------------- 9.00s
geerlingguy.nfs : restart nfs ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- 8.22s
Get Openstack ansible from git ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- 7.95s
Set authorized key for user root  copying it from ssh_pub var --------------------------------------------------------------------------------------------------------------------------------------- 5.90s
Gathering Facts ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.77s
Copy Openstack ansible config to infra1 ------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.66s
Create VXLAN device --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 5.10s
kamaln7.swapfile : Enable swapfile ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 4.80s
kamaln7.swapfile : Set swapfile permissions --------------------------------------------------------------------------------------------------------------------------------------------------------- 4.66s
